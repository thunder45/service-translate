<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Translate - Local Audio Processing</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .login-form {
            display: grid;
            gap: 15px;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        label {
            font-weight: 500;
            font-size: 14px;
        }
        
        input, button, select {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
        }
        
        input, select {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
        }
        
        input[type="range"] {
            background: rgba(255, 255, 255, 0.3);
            height: 6px;
            padding: 0;
        }
        
        #gainValue {
            margin-left: 10px;
            font-weight: 500;
        }
        
        button {
            background: #4CAF50;
            color: white;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #45a049;
        }
        
        button:disabled {
            background: #666;
            cursor: not-allowed;
        }
        
        .streaming-controls {
            text-align: center;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
        }
        
        .translation-panel {
            flex: 1;
        }
        
        .session-input {
            text-align: center;
        }
        
        .session-input label {
            display: block;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 5px;
        }
        
        .session-input input {
            padding: 8px 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
            text-align: center;
            width: 200px;
        }
        
        .session-input input:focus {
            outline: none;
            border-color: #2196F3;
            background: rgba(255, 255, 255, 0.15);
        }
        
        .start-btn {
            background: #2196F3;
            font-size: 16px;
            padding: 15px 30px;
        }
        
        .stop-btn {
            background: #f44336;
        }
        
        .results-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .translation-panel {
            min-height: 300px;
        }
        
        .translation-tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .tab-button {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            padding: 10px 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }
        
        .tab-button.active {
            color: white;
            border-bottom-color: #FFD700;
        }
        
        .tab-button:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .tab-content {
            display: none;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            min-height: 200px;
            max-height: 300px;
            font-size: 16px;
            line-height: 1.5;
            overflow-y: auto;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .panel-header {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .text-content {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            min-height: 200px;
            max-height: 300px;
            font-size: 16px;
            line-height: 1.5;
            overflow-y: auto;
        }
        
        .translation-item {
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
        }
        
        .translation-lang {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 5px;
            color: #FFD700;
        }
        
        .status {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .status.success {
            background: rgba(76, 175, 80, 0.3);
        }
        
        .status.error {
            background: rgba(244, 67, 54, 0.3);
        }
        
        .status.info {
            background: rgba(33, 150, 243, 0.3);
        }
        
        .hidden {
            display: none;
        }
        
        .config-btn, .logout-btn {
            position: absolute;
            top: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 15px;
            font-size: 12px;
            cursor: pointer;
        }
        
        .logout-btn {
            right: 20px;
        }
        
        .config-btn {
            right: 140px;
        }
        
        .cost-warning {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .language-checkbox {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }
        
        .language-checkbox input[type="checkbox"] {
            width: auto;
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="config-btn" onclick="showConfig()">âš™ï¸ Configuration</button>
        <button class="logout-btn hidden" onclick="adminLogout()" id="admin-logout-btn">ğŸšª Logout</button>
        
        <div class="header">
            <h1>ğŸ¤ ADVM Service Translate</h1>
        </div>

        <!-- Configuration Panel -->
        <div id="config-panel" class="card hidden">
            <h2>Configuration</h2>
            <div class="translation-tabs">
                <button class="tab-button active" onclick="switchConfigTab('languages')">ğŸŒ Languages</button>
                <button class="tab-button" onclick="switchConfigTab('audio')">ğŸ¤ Audio</button>
                <button class="tab-button" onclick="switchConfigTab('tts')">ğŸ”Š TTS</button>
                <button class="tab-button" onclick="switchConfigTab('holyrics')">ğŸ“º Holyrics</button>
                <button class="tab-button" onclick="switchConfigTab('advanced')">âš™ï¸ Advanced</button>
            </div>
            
            <div class="tab-content active" id="config-languages">
                <div class="login-form">
                    <div class="form-group">
                        <label>Source Language:</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 5px;">
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="radio" name="sourceLanguage" value="pt-BR" checked> ğŸ‡§ğŸ‡· Portuguese
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="radio" name="sourceLanguage" value="en"> ğŸ‡ºğŸ‡¸ English
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="radio" name="sourceLanguage" value="es"> ğŸ‡ªğŸ‡¸ Spanish
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="radio" name="sourceLanguage" value="fr"> ğŸ‡«ğŸ‡· French
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="radio" name="sourceLanguage" value="de"> ğŸ‡©ğŸ‡ª German
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="radio" name="sourceLanguage" value="it"> ğŸ‡®ğŸ‡¹ Italian
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Target Languages:</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 5px;">
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" id="target-pt"> ğŸ‡§ğŸ‡· Portuguese
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" id="target-en" checked> ğŸ‡ºğŸ‡¸ English
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" id="target-es" checked> ğŸ‡ªğŸ‡¸ Spanish
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" id="target-fr" checked> ğŸ‡«ğŸ‡· French
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" id="target-de" checked> ğŸ‡©ğŸ‡ª German
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" id="target-it" checked> ğŸ‡®ğŸ‡¹ Italian
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="config-advanced">
                <div class="login-form">
                    <div class="form-group">
                        <label>User Pool ID:</label>
                        <input type="text" id="userPoolId" placeholder="us-east-1_...">
                    </div>
                    <div class="form-group">
                        <label>Client ID:</label>
                        <input type="text" id="clientId" placeholder="...">
                    </div>
                    <div class="form-group">
                        <label>Identity Pool ID:</label>
                        <input type="text" id="identityPoolId" placeholder="us-east-1:...">
                    </div>
                    <div class="form-group">
                        <label>Region:</label>
                        <input type="text" id="region" value="us-east-1">
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="config-audio">
                <div class="login-form">
                    <div class="form-group">
                        <label>Input Device:</label>
                        <select id="inputDevice">
                            <option value="default">Default System Input</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Sample Rate:</label>
                        <select id="sampleRate">
                            <option value="16000" selected>16 kHz (Recommended)</option>
                            <option value="8000">8 kHz</option>
                            <option value="22050">22.05 kHz</option>
                            <option value="44100">44.1 kHz</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Encoding:</label>
                        <select id="encoding">
                            <option value="signed-integer" selected>16-bit PCM (Recommended)</option>
                            <option value="unsigned-integer">8-bit PCM</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Channels:</label>
                        <select id="channels">
                            <option value="1" selected>Mono (Recommended)</option>
                            <option value="2">Stereo</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Input Gain:</label>
                        <input type="range" id="inputGain" min="0" max="200" value="100" step="10">
                        <span id="gainValue">100%</span>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="config-tts">
                <div class="login-form">
                    <div class="form-group">
                        <label>TTS Mode:</label>
                        <select id="ttsMode">
                            <option value="disabled">Disabled (Text Only)</option>
                            <option value="local">Local Device TTS</option>
                            <option value="standard">AWS Polly Standard ($4/1M chars)</option>
                            <option value="neural" selected>AWS Polly Neural ($16/1M chars)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Voice Gender:</label>
                        <select id="ttsVoiceGender">
                            <option value="female" selected>Female</option>
                            <option value="male">Male</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>TTS Server Host:</label>
                        <input type="text" id="ttsHost" placeholder="localhost" value="localhost">
                    </div>
                    <div class="form-group">
                        <label>TTS Server Port:</label>
                        <input type="number" id="ttsPort" placeholder="3001" value="3001">
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="config-holyrics">
                <div class="login-form">
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="holyricsEnabled"> Enable Holyrics Integration
                        </label>
                    </div>
                    <div class="form-group">
                        <label>Holyrics Host:</label>
                        <input type="text" id="holyricsHost" placeholder="192.168.1.100" value="localhost">
                    </div>
                    <div class="form-group">
                        <label>Holyrics Port:</label>
                        <input type="number" id="holyricsPort" placeholder="8080" value="8080">
                    </div>
                    <div class="form-group">
                        <label>API Token:</label>
                        <input type="text" id="holyricsToken" placeholder="your-api-token">
                    </div>
                    <div class="form-group">
                        <label>Display Language:</label>
                        <select id="holyricsLanguage">
                            <option value="pt">Portuguese</option>
                            <option value="en">English</option>
                            <option value="es">Spanish</option>
                            <option value="fr">French</option>
                            <option value="de">German</option>
                            <option value="it">Italian</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Max Lines on Screen:</label>
                        <input type="number" id="holyricsMaxLines" min="1" max="10" value="3">
                    </div>
                    <div class="form-group">
                        <button onclick="testHolyricsConnection()" style="margin-top: 10px;">ğŸ§ª Test Connection</button>
                        <button onclick="clearHolyrics()" style="margin-top: 10px; margin-left: 10px;">ğŸ§¹ Clear Screen</button>
                    </div>
                </div>
            </div>
            
            <button onclick="saveConfig()" style="margin-top: 20px;">Save Configuration</button>
        </div>

        <!-- Login Panel -->
        <div id="login-panel" class="card">
            <h2>ğŸ” Admin Authentication</h2>
            <div id="login-status" class="status info hidden"></div>
            <div class="login-form">
                <div class="form-group">
                    <label>Username:</label>
                    <input type="text" id="admin-username" placeholder="admin" autocomplete="username">
                </div>
                <div class="form-group">
                    <label>Password:</label>
                    <input type="password" id="admin-password" placeholder="Enter password" autocomplete="current-password">
                </div>
                <button id="admin-login-btn">ğŸ”‘ Login</button>
                <div style="margin-top: 15px; text-align: center; font-size: 12px; color: rgba(255,255,255,0.7);">
                    Authenticating will create a persistent admin session
                </div>
            </div>
        </div>

        <!-- Token Expiry Warning -->
        <div id="token-expiry-warning" class="status error hidden" style="position: fixed; top: 80px; right: 20px; max-width: 350px; z-index: 1000;">
            <div style="display: flex; align-items: center; justify-content: space-between;">
                <div>
                    <strong>âš ï¸ Session Expiring Soon</strong>
                    <div id="token-expiry-message" style="font-size: 12px; margin-top: 5px;"></div>
                </div>
                <button onclick="refreshAdminToken()" style="padding: 5px 10px; font-size: 11px; margin-left: 10px;">Refresh</button>
            </div>
        </div>

        <!-- Main Application -->
        <div id="main-app" class="hidden">
            <!-- Session Management and TTS Server Health Panels Side by Side -->
            <div style="display: flex; gap: 20px; margin-bottom: 20px;">
                <!-- Session Management Panel (2/3) -->
                <div class="card" id="session-panel" style="flex: 2;">
                    <div class="panel-header">ğŸ“¡ Session Management</div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <div>
                            <div style="font-size: 14px; color: rgba(255,255,255,0.8);">Current Session:</div>
                            <div id="current-session-id" style="font-size: 18px; font-weight: bold; color: #FFD700;">Not Connected</div>
                        </div>
                        <div style="text-align: right;">
                            <button id="refresh-sessions-btn" onclick="refreshSessions()" style="padding: 8px 15px; font-size: 12px;" disabled>ğŸ”„ Refresh</button>
                        </div>
                    </div>
                    
                    <!-- Session View Tabs -->
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <button id="my-sessions-tab" class="tab-button active" onclick="switchSessionView('my')" style="flex: 1; padding: 8px; font-size: 13px; border-radius: 4px;">
                            ğŸ‘¤ My Sessions
                        </button>
                        <button id="all-sessions-tab" class="tab-button" onclick="switchSessionView('all')" style="flex: 1; padding: 8px; font-size: 13px; border-radius: 4px;">
                            ğŸŒ All Sessions
                        </button>
                    </div>
                    
                    <!-- Active Sessions List -->
                    <div style="margin-bottom: 15px;">
                        <div style="font-size: 12px; color: rgba(255,255,255,0.7); margin-bottom: 8px;">
                            <span id="sessions-list-title">My Active Sessions:</span>
                            <span id="sessions-count" style="margin-left: 5px; color: #FFD700;">(0)</span>
                        </div>
                        <div id="sessions-list" style="max-height: 200px; overflow-y: auto; background: rgba(0,0,0,0.2); border-radius: 4px; padding: 8px;">
                            <div style="text-align: center; color: rgba(255,255,255,0.5); padding: 20px;">
                                Connect to server to view sessions
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <label for="sessionId" style="font-size: 14px; white-space: nowrap;">Session ID:</label>
                        <input type="text" id="sessionId" placeholder="Enter session ID" value="CHURCH-2025-001" style="flex: 1; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); border-radius: 4px; color: white;">
                        <button onclick="createSession()" id="create-session-btn" style="padding: 8px 20px; white-space: nowrap;" disabled>ğŸš€ Create Session</button>
                        <button onclick="endCurrentSession()" id="end-session-btn" style="padding: 8px 20px; background: #f44336; white-space: nowrap;" class="hidden">ğŸ›‘ End Session</button>
                    </div>
                </div>
                
                <!-- TTS Server Health Panel (1/3) -->
                <div class="card" id="websocket-panel" style="flex: 1;">
                    <div class="panel-header">ğŸ”Š TTS Server</div>
                    <div style="text-align: center; margin-bottom: 10px;">
                        <div style="font-size: 11px; color: rgba(255,255,255,0.7);">Status</div>
                        <div id="ws-server-status" style="font-weight: bold; color: #999; font-size: 14px;">Unknown</div>
                        <div id="ws-server-url" style="font-size: 10px; color: rgba(255,255,255,0.5); margin-top: 2px;"></div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.2);">
                        <div style="text-align: center;">
                            <div style="font-size: 11px; color: rgba(255,255,255,0.7);">Clients</div>
                            <div id="ws-client-count" style="font-weight: bold; font-size: 14px;">0</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 11px; color: rgba(255,255,255,0.7);">Sessions</div>
                            <div id="ws-session-count" style="font-weight: bold; font-size: 14px;">0</div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 5px; margin-bottom: 10px;">
                        <div id="ws-last-activity" style="font-size: 9px; color: rgba(255,255,255,0.5);">No activity</div>
                    </div>
                    <div>
                        <button onclick="reconnectWebSocket()" style="width: 100%; font-size: 11px; padding: 6px; margin-bottom: 5px;">ğŸ”„ Reconnect</button>
                        <button onclick="stopWebSocketServer()" style="width: 100%; font-size: 11px; padding: 6px; background: #f44336;">ğŸ›‘ Stop</button>
                    </div>
                </div>
            </div>

            <div id="status" class="status">Ready</div>
            
            <div class="streaming-controls">
                <div style="display: flex; align-items: center; justify-content: space-between; gap: 30px; width: 100%;">
                    <div style="flex: 0 0 auto;">
                        <button class="start-btn" onclick="startStreaming()" id="start-btn" disabled title="Create a session first">
                            ğŸ¤ Start Streaming
                        </button>
                        <button class="stop-btn hidden" onclick="stopStreaming()" id="stop-btn" style="display: none;">
                            â¹ï¸ Stop Streaming
                        </button>
                    </div>
                    
                    <!-- Cost Tracking Widget -->
                    <div style="flex: 1; display: flex; align-items: center; justify-content: flex-end; gap: 15px; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border-radius: 10px; padding: 12px 20px; border: 1px solid rgba(255, 255, 255, 0.2);">
                        <div style="font-weight: 600; font-size: 14px;">ğŸ’° Cost Tracking</div>
                        
                        <div style="display: flex; gap: 15px; align-items: center;">
                            <div style="text-align: center;">
                                <span style="font-size: 10px; color: rgba(255,255,255,0.7);">Transcribe:</span>
                                <span id="transcribe-cost" style="font-weight: bold; font-size: 12px; margin-left: 5px;">$0.00</span>
                            </div>
                            <div style="text-align: center;">
                                <span style="font-size: 10px; color: rgba(255,255,255,0.7);">Translate:</span>
                                <span id="translate-cost" style="font-weight: bold; font-size: 12px; margin-left: 5px;">$0.00</span>
                            </div>
                            <div style="text-align: center;">
                                <span style="font-size: 10px; color: rgba(255,255,255,0.7);">Polly:</span>
                                <span id="polly-cost" style="font-weight: bold; font-size: 12px; margin-left: 5px;">$0.00</span>
                            </div>
                            <div style="border-left: 2px solid rgba(255,255,255,0.3); padding-left: 15px;">
                                <span style="font-size: 10px; color: rgba(255,255,255,0.8);">Total:</span>
                                <span id="total-cost" style="font-weight: bold; font-size: 14px; margin-left: 5px; color: #FFD700;">$0.00</span>
                            </div>
                        </div>
                        
                        <button onclick="resetCosts()" style="background: rgba(244, 67, 54, 0.8); padding: 6px 12px; font-size: 11px; margin-left: 10px;">
                            ğŸ”„ Reset
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="results-container">
                <!-- Translation Panel -->
                <div class="card translation-panel">
                    <div class="panel-header">ğŸŒ Real-time Translations</div>
                    <div class="translation-tabs">
                        <button class="tab-button" data-lang="pt" onclick="switchTab('pt')">ğŸ‡§ğŸ‡· Portuguese</button>
                        <button class="tab-button active" data-lang="en" onclick="switchTab('en')">ğŸ‡ºğŸ‡¸ English</button>
                        <button class="tab-button" data-lang="es" onclick="switchTab('es')">ğŸ‡ªğŸ‡¸ Spanish</button>
                        <button class="tab-button" data-lang="fr" onclick="switchTab('fr')">ğŸ‡«ğŸ‡· French</button>
                        <button class="tab-button" data-lang="de" onclick="switchTab('de')">ğŸ‡©ğŸ‡ª German</button>
                        <button class="tab-button" data-lang="it" onclick="switchTab('it')">ğŸ‡®ğŸ‡¹ Italian</button>
                    </div>
                    <div class="tab-content" data-lang="pt" id="translation-pt">
                        Portuguese translation will appear here...
                    </div>
                    <div class="tab-content active" data-lang="en" id="translation-en">
                        English translation will appear here...
                    </div>
                    <div class="tab-content" data-lang="es" id="translation-es">
                        Spanish translation will appear here...
                    </div>
                    <div class="tab-content" data-lang="fr" id="translation-fr">
                        French translation will appear here...
                    </div>
                    <div class="tab-content" data-lang="de" id="translation-de">
                        German translation will appear here...
                    </div>
                    <div class="tab-content" data-lang="it" id="translation-it">
                        Italian translation will appear here...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load modular JavaScript files in dependency order -->
    <!-- Phase 1: Core utilities -->
    <script src="src/ui/utils.js"></script>
    <script src="src/ui/ui-manager.js"></script>
    
    <!-- Phase 2: Self-contained features -->
    <script src="src/ui/cost-tracker.js"></script>
    <script src="src/ui/holyrics-integration.js"></script>
    <script src="src/ui/config-manager.js"></script>
    
    <!-- Phase 3: Critical modules -->
    <script src="src/ui/auth-manager.js"></script>
    <script src="src/ui/websocket-manager.js"></script>
    
    <!-- Phase 4: Coordination modules -->
    <script src="src/ui/session-manager.js"></script>
    <script src="src/ui/streaming-controller.js"></script>
    <script src="src/ui/event-handlers.js"></script>
    
    <!-- Phase 5: Application initialization (must load last) -->
    <script src="src/ui/app-init.js"></script>
    
</body>
</html>
