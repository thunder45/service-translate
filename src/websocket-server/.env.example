# Server Configuration
PORT=3001

# =============================================================================
# Cognito Authentication Configuration (REQUIRED)
# =============================================================================
# These values are obtained from the CDK deployment output after deploying
# the backend stack. Run: cd src/backend && npm run deploy
#
# The server validates these on startup and will fail fast if missing.
#
# User Pool Client Requirements:
# - Client Type: Public client (no secret)
# - Auth Flows: ALLOW_USER_PASSWORD_AUTH, ALLOW_REFRESH_TOKEN_AUTH
# - Token Expiry: Access Token (1h), ID Token (1h), Refresh Token (30d)
# - Read/Write Attributes: email, preferred_username (minimum)
# =============================================================================

COGNITO_REGION=us-east-1                            # AWS region where Cognito User Pool is deployed
COGNITO_USER_POOL_ID=                               # Cognito User Pool ID (e.g., us-east-1_xxxxxx)
COGNITO_CLIENT_ID=                                  # Cognito User Pool Client ID (public client, no secret)

# =============================================================================
# Admin Identity Persistence
# =============================================================================

ADMIN_IDENTITIES_DIR=./admin-identities             # Directory for admin identity persistence
ADMIN_IDENTITY_CLEANUP_ENABLED=true                 # Enable automatic cleanup of inactive admin identities
ADMIN_IDENTITY_RETENTION_DAYS=90                    # Days to retain inactive admin identities
ADMIN_IDENTITY_CLEANUP_INTERVAL_MS=86400000         # Cleanup interval (default: 24 hours)

# =============================================================================
# TTS Configuration (Optional)
# =============================================================================

ENABLE_TTS=false                                    # Set to 'true' to enable AWS Polly TTS
AWS_REGION=us-east-1                                # AWS region for Polly (can be same as COGNITO_REGION)
AWS_IDENTITY_POOL_ID=                               # Cognito Identity Pool ID (e.g., us-east-1:xxx-xxx-xxx)
AWS_JWT_TOKEN=                                      # JWT token from Cognito (optional, can be passed from capture app)

# =============================================================================
# Security Configuration (Optional)
# =============================================================================

ENABLE_AUTH=false                                   # Enable authentication for WebSocket connections
AUTH_USERNAME=                                      # Username for basic auth (if enabled)
AUTH_PASSWORD=                                      # Password for basic auth (if enabled)

# =============================================================================
# Session Configuration
# =============================================================================

AUTO_GENERATE_SESSION_IDS=false                     # Auto-generate secure session IDs (false = accept client IDs)
SECURE_SESSION_IDS=false                            # Use cryptographically secure session IDs
SESSION_ID_PREFIX=CHURCH                            # Prefix for generated session IDs
SESSION_SECRET=default-secret-key                   # Secret key for session ID generation
SESSION_TIMEOUT_MINUTES=480                         # Session timeout in minutes (default: 8 hours)
SESSION_PERSISTENCE_DIR=./sessions                  # Directory for session file persistence
SESSION_CLEANUP_ENABLED=true                        # Enable automatic cleanup of expired sessions
SESSION_CLEANUP_INTERVAL_MS=3600000                 # Session cleanup interval (default: 1 hour)

# =============================================================================
# Rate Limiting
# =============================================================================

WEBSOCKET_RATE_LIMIT_PER_SECOND=10                  # Max WebSocket messages per second per client
POLLY_RATE_LIMIT_PER_MINUTE=60                      # Max Polly TTS requests per minute per client
MAX_CLIENTS_PER_SESSION=50                          # Max clients allowed per session
